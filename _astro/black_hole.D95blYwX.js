import{j as o}from"./jsx-runtime.9YwcPWTT.js";import{r as c}from"./index.LFf77hJu.js";import{b as k,G as A}from"./state_management.IfemeKTu.js";const P=9e3,B=i=>{const t={};Object.keys(A.get()).forEach(d=>{t[d]=!1}),t[i]=!0,setTimeout(()=>{A.set(t)},P),console.log("activate : ",i)},G=({func:i})=>{if(!k.get())return;const t={left:"50%",bottom:"5%"},d=()=>{k.set(!1),i(),B("accessibility")};return o.jsx("div",{className:"intro-button",style:t,children:o.jsx("button",{onClick:()=>d(),children:o.jsx("h3",{children:"Hyper-Space"})})})},_=({children:i=null})=>{const[t,d]=c.useState([]),[m,y]=c.useState(0),[v,C]=c.useState("#000"),[j,E]=c.useState(!1),w=256,M=512;let s=window.innerWidth,r=window.innerHeight,f=Math.round(s/2),u=Math.round(r/2),l=(s+r)/2,b=1/l;const S=c.useRef(null),h=c.useRef(null);let n;S.current&&h.current&&(s=h.current.clientWidth,r=h.current.clientHeight,f=Math.round(s/2),u=Math.round(r/2),l=(s+r)/2,b=1/l,n=S.current.getContext("2d"),n.canvas.width=s,n.canvas.height=r,n.fillStyle=v,n.strokeStyle="#fff"),document.onmousemove=e=>{};const H=()=>{if(!n)return;C("rgba(0, 0, 0, 0.1)");let e=m+1;const a=()=>{e<8?(y(e),e+=1,setTimeout(a,1e3)):E(!0)};a()};c.useEffect(()=>{T(),y(4)},[]),m>0&&R();function T(){for(var e=0;e<M;e++)t[e]=new Array(6),t[e][0]=Math.random()*s*2-f*2,t[e][1]=Math.random()*r*2-u*2,t[e][2]=Math.round(Math.random()*l),t[e][3]=Math.random()*s*2-f*2,t[e][4]=Math.random()*r*2-u*2;d(t.slice())}function R(){if(n){n.fillStyle=v,n.fillRect(0,0,s,r);for(let e=0;e<M;e++){let a=!0;t[e][2]-=m,t[e][0]>f<<1&&(t[e][0]-=s<<1,a=!1),t[e][0]<-f<<1&&(t[e][0]+=s<<1,a=!1),t[e][1]>u<<1&&(t[e][1]-=r<<1,a=!1),t[e][1]<-u<<1&&(t[e][1]+=r<<1,a=!1),t[e][2]>l&&(t[e][2]-=l,a=!1),t[e][2]<0&&(t[e][2]+=l,a=!1);let[W,F,p,x,g]=t[e];if(t[e][3]=f+W/p*w,t[e][4]=u+F/p*w,a){if(x<0||x>s)continue;if(g<0||g>r)continue}else continue;n.lineWidth=(1-b*p)*2,n.beginPath(),n.moveTo(x,g),n.lineTo(t[e][3],t[e][4]),n.stroke(),n.closePath()}requestAnimationFrame(R)}}return o.jsxs(o.Fragment,{children:[o.jsxs("div",{id:"black-hole",ref:h,children:[o.jsx("canvas",{width:100,height:100,ref:S}),o.jsx("div",{id:"singularity",style:{animation:j?"singularity 4s ease-in 1s forwards":""}})]}),o.jsx(G,{func:H}),!j&&i&&i]})};export{_ as BlackHole};
